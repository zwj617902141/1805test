<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	
		<link rel="stylesheet" href="css/car.css" />
		<link rel="stylesheet" type="text/css" href="css/iconfont.css"/>
	</head>
	<body>
		<div class="header layout">
	<span>您好,欢迎来到乐淘网</span>
	<ul>
		<li class="denglu"></li>
		<li><a href="">注册</a></li>
		<li><a href="">收藏</a></li>
		
	</ul>
		</div>
		<div class="header2 layout">
			<img src="css/logo.png"/>
			<div class="fox">
				<img src="css/btn.png"/>
			
			<span id="sp">
				搜索
			</span>
			<input type="text" name="txt" id="txt" value="" />
		</div>
		<div class="gwc">
			<img src="css/gwc.jpg"/>
		</div>
		</div>
		<p><a href="">耐克</a><a href="">阿迪达斯</a><a href="">李宁</a><a href="">牛逼</a><a href="">匡威</a></p>
<ul class="nav layout">
				<li ><a href="index.html">首页</a></li>
				<li><a href="">轻奢原创</a>
				
					
				</li>
				<li><a href="">vip专区</a></li>
				<li><a href="list.html">运动鞋
				</a>
				</li>
				<li><a href="">女鞋</a></li>
				<li><a href="">男鞋</a></li>
				<li><a href="">童鞋</a></li>
				<li><a href="">箱包</a></li>
			</ul>
			<div class="mycar">
				<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/cart_1.png"/>
				<div class="mycar-car">
					<i class="iconfont">&#xe887;</i>我的购物车
				</div>
			</div>
			<div class="shoppingOrder_name">
		<table style=" width:100%; border:0; cellspacing:0; cellpadding:0; ">
			<tbody><tr>
				<td width="440">
					<div class="shoppingOrder_all select_chk fl">
						<input class="checkboxClass1" type="checkbox" id="selectAll1">&nbsp;&nbsp;<label for="selectAll1">全选</label>
					&nbsp;&nbsp;&nbsp;商品信息</div>
					
				</td>
				<td width="150">单价（元）</td>
				<td width="130">数量</td>
				<td width="130">小计</td>
				<td width="90">操作</td>
			</tr>
		</tbody></table>
	</div>
			<div class="shoppingOrder">
		<div class="shoppingOrder_item" id="check">

			<table style=" width:100%; border:0; cellspacing:0; cellpadding:0; " class="shoppingOrder_table">
 
				<tbody>
				
				
				
			</tbody></table>
		</div>
		
		
		<div class="shoppingOrder_control clearbox">
			<div class="shoppingOrder_all fl" id="check">
				<input type="checkbox" class="checkboxClass1" id="selectAll2" ">&nbsp;&nbsp;<label class="checkboxClass1" for="selectAll2">全选</label>
			</div>
			<div class="shoppingOrder_links fl">
				<a href="javascript:void(0)" title="" id="delSelect" value="删除所选">删除选中商品</a>
				<a href="javascript:void(0)" title="" >清空购物车</a>				
			</div> 
			<div class="order_calculate fr">
				<div class="order_calculateName">
					<p>商品总金额：</p>
				
				</div>
				<div class="order_calculateNum">
					<p class="total">总计（不含运费）：<span>¥</span><span id="total">0.00</span></p>
					
				</div>
			</div>			
		</div>
		<div class="order_settlement">
			<span class="num">已选商品<span id="amount">0</span>件</span>			
			<strong class="sum">应付金额：<span>¥</span><span id="total2">0.00</span></strong> 
		
			<button id="cart_account" class="order_submit" disabled="disabled" style="background: rgb(194, 182, 180);">去结算</button>
		</div>
	</div>
		<div class="footer">
			<div class="footer_l">
				
		<h3><span> 关于我们</span><span> 关于我们</span><span> 关于我们</span><span> 关于我们</span><span> 关于我们</span></h3>
			<ul>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				
			</ul>
				<ul>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				
			</ul>	<ul>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				
			</ul>	<ul>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
				
			</ul>	<ul>
				<li><a href="">乐淘简介</a></li>
				<li><a href="">乐淘简介</a></li>
			
				
			</ul>
			</div>
			<div class="footer_r">
				<dl>
					<dt><img src="http://16089138.s21i.faiusr.com/4/ABUIABAEGAAg_PnO1wUo8OWLzwIwrAI4rAI!160x160.png"/></dt>
					<dd><p>手机乐淘</p>
						<p>app商城</p>
					</dd>
				</dl>
				
			</div>
		</div>
		<div class="last">
	
			<span >
				©2018 广州乐淘盛势网络科技有限公司 版权所有
			</span>
			<p>手机版 | 粤ICP备14019125号</p>
			
		</div>
	</body>
	<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
	<script src="modle/zhuce.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
	$.ajax({
		type:"get",
		url:"http://localhost/happygo/data/list.json",
		success:function(res){
			
			
			new Addcar(res)
   $(".operation").click(function(){
       	$(this).parent().parent().remove()
         $.cookie($(this).attr("index"),null	)
        sumprice()
       })
          sumprice()
         $(".shoppingOrder_links").children().eq(1).click(function(){
         	
         	$("tbody").eq(1).html(null);
           	    	for(var k in res)
      	{
      		if($.cookie(res[k].id))
      		{
      			$.cookie(res[k].id,null)
      		}
      	}
        sumprice()
         	
         })
         
         <!--删除选中-->
         $('#delSelect').click(function(){
            
         	$.cookie( $('.checkboxClass:checked').attr("index"),null	)
   $('.checkboxClass:checked').parent().parent().parent().remove()	
     
        sumprice()
         	
         })
         <!--//全选-->
          $('.checkboxClass').click(function(){
       	console.log(1)
		if($('.checkboxClass:checked').length==$('.checkboxClass').length){
	$('.checkboxClass1').prop('checked',true);
				}else{
					$('.checkboxClass1').prop('checked',false);
				}
			});
         
		}
	});
	
	function Addcar(res){
		
		this.str=""
		for(var	 i in  res)
		{ 
			if ($.cookie(res[i].id)) {
				
				this.num= $.cookie(res[i].id)
			this.show(i,res)
			} else{
				
			}
		}
	$("tbody").eq(1).html(this.str)
	}
        Addcar.prototype.show=function(i,res)
      { 
this.str+=`
<tr>
	<td width="440">				
		<div class="shoppingOrder_chk" id="chk">   
			<input type="checkbox" class="checkboxClass" id='' index="${res[i].id}" ><label for="selectItem_1"></label> 
		</div>
		<div class="shoppingOrder_img">
			
			<img src='${res[i].imgUrl}' width="100" height="100" alt="ADIDAS阿迪达斯 女式 Duramo 7 Trail W跑步鞋 AQ5870">
		
		</div>
		<div class="shoppingOrder_about">
		<a href="">&nbsp;&nbsp; ${res[i].title} </a>
			
			<div class="shoppingOrder_info">
			<span>尺寸：36.5</span>&nbsp;&nbsp;&nbsp;&nbsp;
			</div>
		</div>
	</td>
	<td width="150">
	 ${res[i].price}
      </td>
       	<td width="130">
		<div class="shoppingOrder_amount globalNum">
		<div class="Tcount" id="88966_Tcount">
		<input type="number" index="${res[i].price}" class="goodsnum" id="${res[i].id}" value=${this.num} min="1"/>   
		</div>
		</div>
	</td>
	<td width="130">
		<div class="shoppingOrder_sum" id="cart_subtotal_88966"> ${(this.num)*res[i].price} </div>
         </td><td width="90">
		<div class="operation" index='${res[i].id}'>	
		<span>删除</span>
      </div>
  </td> </tr>`
         
           }
           
      
      //价格
      
      function sumprice(){
      	 var sum=0
      	 var sum2=0
      
      	for(var j=0;j<$(".goodsnum").length;j++)
      	{  
      		sum+= parseInt($(".goodsnum").eq(j).val())
      	  sum2+=parseInt($(".shoppingOrder_sum").eq(j).html())
      }
      	console.log(sum2)
      	$("#amount").html(sum)
      	$("#total2").html(sum2)
      	$("#total").html(sum2)
      }
      $("tbody").on("input",".goodsnum",function(){
      	console.log(123456)
      					var n = $(this).val()
      					var goods =$(this).attr("id")
           				var price=$(this).attr("index")
      					$.cookie(goods,n)
      						 $(".shoppingOrder_sum").eq($(this).index()).html(n*price)
      					sumprice()
                    
      				})
      
      //删除
//    function delet(){
//    	$(".shoppingOrder_links").children().eq(1).remove()
//    	for(var k in res)
//    	{
//    		if($.cookie(res[i].id))
//    		{
//    			$.cookie(res[i].id,null)
//    		}
//    	}
//    	
//    	
//    }



      
      
      
      
          $(".checkboxClass1").click(function(){
          	
          
				if($(this).prop('checked')){
					$('.checkboxClass').prop('checked',true);
					$('.checkboxClass1').prop('checked',true);
				}else{
					$('.checkboxClass').prop('checked',false);
					$('.checkboxClass1').prop('checked',false);
					
				}
				
          })
          
 
	
	</script>
</html>
